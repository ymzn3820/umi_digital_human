(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childCont-figure-figure_file"],{"05f6":function(t,i,e){"use strict";var n=e("6559"),a=e.n(n);a.a},"0c76":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"audio-card"},[e("v-uni-view",{staticClass:"title"},[t._v(t._s(t.title))]),e("v-uni-view",{staticClass:"audio"},[t.isPlay?t._e():e("v-uni-image",{staticClass:"play-icon",attrs:{mode:"scaleToFill",src:t.startImg},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.audioPlay.apply(void 0,arguments)}}}),t.isPlay?e("v-uni-image",{staticClass:"play-icon",attrs:{mode:"scaleToFill",src:t.endImg},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.audioPause.apply(void 0,arguments)}}}):t._e(),e("v-uni-view",{staticClass:"audio-main"},[e("v-uni-slider",{staticClass:"progress",attrs:{max:"100","block-size":"12","block-color":t.sliderColor,activeColor:t.activeColor,backgroundColor:t.backgroundColor,value:t.progress},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.handleChange.apply(void 0,arguments)},changing:function(i){arguments[0]=i=t.$handleEvent(i),t.handleProgress.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"time"},[e("v-uni-view",[t._v(t._s(t.dateFormart(t.currentTime)))]),e("v-uni-view",[t._v(t._s(t.dateFormart(t.duration)))])],1)],1)],1)],1)},a=[]},"2e54":function(t,i,e){"use strict";e.r(i);var n=e("681d"),a=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},"51c4":function(t,i,e){var n=e("75f7");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f065").default;a("19848cbe",n,!0,{sourceMap:!1,shadowMode:!1})},"57c6":function(t,i,e){"use strict";e.r(i);var n=e("d3fe"),a=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},6559:function(t,i,e){var n=e("9eee");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f065").default;a("19eaac06",n,!0,{sourceMap:!1,shadowMode:!1})},"681d":function(t,i,e){"use strict";(function(t){e("7a82");var n=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("ade3")),o=e("755d"),s=n(e("ce80")),r={data:function(){return(0,a.default)({modelName:"",img_url:"",letter_url:"",isClick:!0,tipImg:"",fileTip5:t.baseImg+"/xcx/ec3169d9-62e2-4d6d-87a8-574f5ef03dd5.jpg",fileTip6:t.baseImg+"/xcx/a39df7f8-62a9-4e3b-b2cb-1e6b859f86f5.jpg",fileTip7:t.baseImg+"/xcx/bfb823ee-6ffd-4076-97f0-904eeec92819.jpg",live_code:""},"modelName","")},components:{Audio:s.default},onLoad:function(t){t.name&&(this.modelName=t.name),t.live_code&&(this.live_code=t.live_code,this.getList(t.live_code))},onShow:function(){},methods:{getList:function(t){var i=this,e={live_code:t};(0,o.getFigureDetail)(e).then((function(t){2e4==t.code?(i.modelName=t.data.live_name,i.img_url=t.data.live_video_url,i.letter_url=t.data.power_attorney_url,i.tipImg=t.data.video_cover_url):i.$api.msg(t.msg)})).catch((function(t){i.$api.msg("获取失败")}))},saveFile:function(){var i=this;uni.chooseVideo({sourceType:["album"],extension:[".mp4"],success:function(e){var n=e.size;if(n>104857600)i.$api.msg("该视频已超过100M，不能上传");else{var a=e.tempFilePath;uni.showLoading({title:"上传中"}),uni.uploadFile({url:t.loginUrl+"/api/user/oss_upload",filePath:a,name:"image",formData:{image:a,image_name:"视频",oss_dir:"static",cate:"create_character"},success:function(t){var e=JSON.parse(t.data);uni.hideLoading(),2e4==e.code?(i.img_url=e.data.new_url,i.getCover(e.data.new_url)):i.$api.msg(e.msg)},fail:function(t){i.$api.msg("上传失败"),uni.hideLoading()}})}}})},saveVoice:function(){var i=this;uni.chooseFile({count:1,type:"image",sourceType:["album","camera"],success:function(e){e.tempFiles[0].size;var n=e.tempFilePaths[0];uni.uploadFile({url:t.loginUrl+"/api/user/oss_upload",filePath:n,name:"image",formData:{image:n,image_name:"图片",oss_dir:"static",cate:"create_character"},success:function(t){var e=JSON.parse(t.data);2e4==e.code?i.letter_url=e.data.new_url:i.$api.msg(e.msg)},fail:function(t){i.$api.msg("上传失败")}})}})},getCover:function(t){var i=this,e={live_video_url:t};uni.showLoading({title:"获取封面中"}),(0,o.getCover)(e).then((function(t){uni.hideLoading(),2e4==t.code?i.tipImg=t.data:i.$api.msg(t.msg)})).catch((function(t){i.$api.msg("获取失败"),uni.hideLoading()}))},submit:function(){var t=this;if(""!=this.img_url)if(""!=this.letter_url){if(0!=this.isClick){this.isClick=!1;var i={live_name:this.modelName,custom_type:"基础模特定制",power_attorney_url:this.letter_url,live_video_url:this.img_url,video_cover_url:this.tipImg};""==this.live_code?(0,o.addFigure)(i).then((function(i){2e4==i.code?(t.isClick=!0,t.$api.msg("提交成功"),setTimeout((function(){uni.navigateTo({url:"/childCont/figure/figure_product"})}),1e3)):(t.$api.msg(i.msg),t.isClick=!0)})).catch((function(i){t.$api.msg("提交失败"),t.isClick=!0})):(i.live_code=this.live_code,(0,o.editFigure)(i).then((function(i){2e4==i.code?(t.isClick=!0,t.$api.msg("修改成功"),setTimeout((function(){uni.navigateTo({url:"/childCont/figure/figure_product"})}),1e3)):(t.$api.msg(i.msg),t.isClick=!0)})).catch((function(i){t.$api.msg("修改失败"),t.isClick=!0})))}}else this.$api.msg("请上传形象授权文件");else this.$api.msg("请上传数字人视频")},checkAgree:function(){uni.navigateTo({url:"/pages/agree/agree?agree_type=6"})},getFile:function(){window.open(t.baseImg+"/static/digital_human_static/e0945c30-86c8-4db6-a701-1fe66d491406.docx")},getImgUrl:function(i){return t.baseImg+"/"+i}}};i.default=r}).call(this,e("c8ba"))},"691e":function(t,i,e){"use strict";var n=e("51c4"),a=e.n(n);a.a},"6b03":function(t,i,e){"use strict";e.r(i);var n=e("9353"),a=e("2e54");for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("691e");var s=e("f0c5"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"eab08488",null,!1,n["a"],void 0);i["default"]=r.exports},"75f7":function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,".containar[data-v-eab08488]{width:100%;padding:%?30?%}.video_cont[data-v-eab08488]{width:100%;background:#fff;padding:%?30?%;display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:%?30?%;border-radius:%?10?%}.video_cont .cont_title[data-v-eab08488]{color:#000;font-size:%?32?%;font-style:normal;font-weight:500;line-height:150%;padding:%?20?%}.video_cont .title_info[data-v-eab08488]{display:flex;align-items:center;border-radius:%?10?%;border:%?1?% solid #d1d3d6;padding:%?15?%;margin-bottom:%?15?%;width:100%}.video_cont .title_info .title_text[data-v-eab08488]{font-size:%?28?%;color:#000;margin-right:%?10?%}.video_cont .video_up[data-v-eab08488]{width:100%;height:%?350?%;display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:%?10?%;border:%?1?% dashed #d1d3d6;background:#f6f8fb}.video_cont .video_up .video_text[data-v-eab08488]{font-size:%?28?%;color:#666;line-height:%?48?%}.video_cont .video_li[data-v-eab08488]{width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}.video_cont .video_li .sp_img[data-v-eab08488]{width:100%;height:%?350?%;border-radius:%?10?%}.video_cont .video_li .video_tip[data-v-eab08488]{color:#2d2d2d;font-size:%?24?%;padding:%?20?% 0}.video_cont .tip[data-v-eab08488]{padding:%?40?%;display:flex;align-items:center;justify-content:center;width:100%}.video_cont .tip .tip_line[data-v-eab08488]{height:%?1?%;background:#d1d3d6;flex:1}.video_cont .tip .tip_text[data-v-eab08488]{color:#2d2d2d;font-size:%?26?%;padding:0 %?25?%}.bot[data-v-eab08488]{width:60%}.bot .bot_cont[data-v-eab08488]{display:flex;justify-content:space-between;padding-bottom:%?25?%}.bot .bot_left[data-v-eab08488]{width:100%;height:%?80?%;background:#1f64ff;border-radius:6px;font-style:normal;font-weight:500;font-size:14px;line-height:20px;color:#fff;display:flex;justify-content:center;align-items:center;margin:%?20?% auto 0}.cont_slove[data-v-eab08488]{width:100%;display:flex;align-items:center;justify-content:space-around;margin-bottom:%?150?%}.cont_slove .slove[data-v-eab08488]{display:flex;flex-direction:column;align-items:center;justify-content:center}.cont_slove .slove .slove_img[data-v-eab08488]{width:%?60?%;height:%?60?%;margin:%?15?% 0}.cont_slove .slove .slove_text[data-v-eab08488]{color:#34373d;font-size:%?24?%;font-style:normal;font-weight:400;line-height:150%}.bottom[data-v-eab08488]{width:100%;background:#fff;position:fixed;bottom:0}.bottom_cont[data-v-eab08488]{display:flex;justify-content:center;flex-direction:column;padding:%?25?% 0}.bottom_buy[data-v-eab08488]{width:90%;height:%?80?%;background:#1f64ff;border-radius:6px;font-family:PingFang SC;font-style:normal;font-weight:500;font-size:14px;line-height:20px;color:#fff;display:flex;justify-content:center;align-items:center;margin:%?20?% auto 0}.bottom_desc[data-v-eab08488]{width:%?624?%;height:%?34?%;font-style:normal;font-weight:400;font-size:%?24?%;line-height:%?34?%;margin:%?20?% auto 0;text-align:center}.slove_down[data-v-eab08488]{color:#2e6fff}.voice_list[data-v-eab08488]{width:100%}.voice_list .list_li[data-v-eab08488]{width:100%;border-radius:%?12?%;background:#fff;margin:%?20?% 0;padding:%?20?%;border:%?1?% solid #e1dfdf}",""]),t.exports=i},9353:function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var n={uInput:e("01d9").default,uIcon:e("1621").default},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"containar"},[e("v-uni-view",{staticClass:"video_cont"},[""!=t.live_code?e("v-uni-view",{staticClass:"cont_title"},[t._v("数字人信息")]):t._e(),""!=t.live_code?e("v-uni-view",{staticClass:"title_info"},[e("v-uni-text",{staticClass:"title_text"},[t._v("模特名称")]),e("u-input",{attrs:{customStyle:{width:"100%"},inputAlign:"left",placeholder:"请输入名称",type:"text",border:"none",maxlength:"10"},model:{value:t.modelName,callback:function(i){t.modelName=i},expression:"modelName"}})],1):t._e(),e("v-uni-view",{staticClass:"cont_title"},[t._v("视频预览")]),e("v-uni-view",{staticClass:"video_li"},[""==t.img_url?e("v-uni-view",{staticClass:"video_up",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.saveFile()}}},[e("u-icon",{attrs:{name:"plus",color:"#D1D3D6",size:"24"}}),e("v-uni-text",{staticClass:"video_text"},[t._v("请上传视频")])],1):e("v-uni-video",{staticClass:"sp_img",attrs:{src:t.getImgUrl(t.img_url),objectFit:"cover"}}),e("v-uni-view",{staticClass:"video_tip"},[t._v("注：上传的视频将用于数字人定制，请慎重选择视频上传")]),e("v-uni-view",{staticClass:"bot"},[e("v-uni-view",{staticClass:"bot_cont"},[e("v-uni-view",{staticClass:"bot_left",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.saveFile()}}},[t._v("上传视频")])],1)],1),e("v-uni-view",{staticClass:"video_tip",staticStyle:{"font-size":"28upx"}},[t._v("形象图片（等待图片自动加载出来之后再提交）")]),""!=t.tipImg?e("v-uni-image",{staticClass:"tip_img",attrs:{src:t.getImgUrl(t.tipImg),alt:"",mode:"aspectFit"}}):t._e()],1)],1),e("v-uni-view",{staticClass:"video_cont"},[e("v-uni-view",{staticClass:"cont_title"},[e("v-uni-text",[t._v("形象授权")])],1),""==t.letter_url?e("v-uni-view",{staticClass:"video_up",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.saveVoice.apply(void 0,arguments)}}},[e("u-icon",{attrs:{name:"plus",color:"#D1D3D6",size:"24"}}),e("v-uni-text",{staticClass:"video_text"},[t._v("请上传有效授权书截图")])],1):t._e(),""!=t.letter_url?e("v-uni-view",{staticClass:"video_li"},[e("v-uni-image",{staticClass:"sp_img",attrs:{src:t.getImgUrl(t.letter_url)}})],1):t._e(),""!=t.letter_url?e("v-uni-view",{staticClass:"bot"},[e("v-uni-view",{staticClass:"bot_cont"},[e("v-uni-view",{staticClass:"bot_left",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.saveVoice.apply(void 0,arguments)}}},[t._v("重新上传")])],1)],1):t._e(),e("v-uni-view",{staticClass:"tip"},[e("v-uni-text",{staticClass:"tip_line"}),e("v-uni-text",{staticClass:"tip_text"},[t._v("注意事项")]),e("v-uni-text",{staticClass:"tip_line"})],1),e("v-uni-view",{staticClass:"cont_slove"},[e("v-uni-view",{staticClass:"slove"},[e("v-uni-image",{staticClass:"slove_img",attrs:{src:t.fileTip5,mode:""}}),e("v-uni-view",{staticClass:"slove_text"},[e("v-uni-text",[t._v("下载")]),e("v-uni-text",{staticClass:"slove_down",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getFile.apply(void 0,arguments)}}},[t._v("授权书模板")])],1)],1),e("v-uni-view",{staticClass:"slove"},[e("v-uni-image",{staticClass:"slove_img",attrs:{src:t.fileTip6,mode:""}}),e("v-uni-view",{staticClass:"slove_text"},[t._v("手写授权人信息")])],1),e("v-uni-view",{staticClass:"slove"},[e("v-uni-image",{staticClass:"slove_img",attrs:{src:t.fileTip7,mode:""}}),e("v-uni-view",{staticClass:"slove_text"},[t._v("拍照上传")])],1)],1)],1)],1),e("v-uni-view",{staticClass:"bottom"},[e("v-uni-view",{staticClass:"bottom_cont"},[e("v-uni-view",{staticClass:"bottom_buy",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.submit.apply(void 0,arguments)}}},[t._v("立即提交")]),e("v-uni-view",{staticClass:"bottom_desc"},[e("v-uni-text",[t._v("提交即默认接受")]),e("v-uni-text",{staticStyle:{color:"#1F64FF"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.checkAgree.apply(void 0,arguments)}}},[t._v("《定制数字人协议》")])],1)],1)],1)],1)},o=[]},"9eee":function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.audio-card[data-v-903a256a]{display:flex;flex-direction:column;padding:%?20?% %?24?%}.audio-card .title[data-v-903a256a]{color:#000;font-size:%?30?%;font-weight:500;width:80%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.audio-card .audio[data-v-903a256a]{margin-top:%?15?%;display:flex}.audio-card .audio .play-icon[data-v-903a256a]{width:%?60?%;height:%?60?%;margin-right:%?15?%}.audio-card .audio .audio-main[data-v-903a256a]{height:%?48?%;flex:1;margin-left:%?15?%}.audio-card .audio .progress[data-v-903a256a]{margin:0}.audio-card .audio .time[data-v-903a256a]{width:100%;height:%?50?%;font-size:%?24?%;font-weight:400;color:#666;margin-top:%?-15?%;display:flex;align-items:center;justify-content:space-between}',""]),t.exports=i},ce80:function(t,i,e){"use strict";e.r(i);var n=e("0c76"),a=e("57c6");for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("05f6");var s=e("f0c5"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"903a256a",null,!1,n["a"],void 0);i["default"]=r.exports},d3fe:function(t,i,e){"use strict";(function(t){e("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("a9e3"),e("99af");var n={props:{audio:{type:String,default:""},title:{default:"语音合成"},sliderColor:{type:String,default:"#1F64FF"},activeColor:{type:String,default:"#1F64FF"},backgroundColor:{type:String,default:"#EFEFEF"}},data:function(){return{innerAudioContext:null,isPlay:!1,timer:null,currentTime:0,duration:0,progress:0,intervalID:null,startImg:t.baseImg+"/xcx/e47bc10b-bb4c-43a1-8d5a-1bda0b917003.jpg",endImg:t.baseImg+"/xcx/90a9be00-0c42-440e-9ea9-267e52d7808b.jpg"}},watch:{audio:{handler:function(t){this.creatAudio()},deep:!0,immediate:!0}},destroyed:function(){this.innerAudioContext.destroy()},methods:{creatAudio:function(){var t=this;this.innerAudioContext=uni.createInnerAudioContext(this),this.innerAudioContext.src=encodeURI(this.audio),this.innerAudioContext.sessionCategory="soloAmbient",this.innerAudioContext.autoplay=!0,this.innerAudioContext.volume=0,this.innerAudioContext.startTime=0,this.innerAudioContext.play(),this.innerAudioContext.onTimeUpdate((function(){})),this.innerAudioContext.onCanplay((function(){t.intervalID=setInterval((function(){0!==t.innerAudioContext.duration&&(clearInterval(t.intervalID),t.duration=t.innerAudioContext.duration)}),100)})),setTimeout((function(){t.innerAudioContext.pause()}),100)},audioPlay:function(){this.dateFormart(this.currentTime)===this.dateFormart(this.duration)&&(this.progress=100),this.innerAudioContext.src=encodeURI(this.audio),this.innerAudioContext.startTime=0,this.innerAudioContext.volume=1,this.innerAudioContext.sessionCategory="soloAmbient",this.innerAudioContext.seek(100===Number(this.progress)?0:this.currentTime?this.currentTime:0),this.innerAudioContext.startTime=100===Number(this.progress)?0:this.currentTime?this.currentTime:0,this.innerAudioContext.play(),this.onCanplay(),this.isPlay=!0},onCanplay:function(){var t=this;this.innerAudioContext.onCanplay((function(){t.currentTime=t.innerAudioContext.currentTime})),this.innerAudioContext.onTimeUpdate((function(){t.currentTime=t.innerAudioContext.currentTime,t.progress=(t.innerAudioContext.currentTime/t.innerAudioContext.duration*100).toFixed(2)})),this.innerAudioContext.onEnded((function(){t.isPlay&&(t.isPlay=!1)}))},audioPause:function(){this.innerAudioContext.pause(),this.isPlay=!this.isPlay},handleProgress:function(t){this.innerAudioContext.pause()},handleChange:function(t){this.progress=t.detail.value,this.currentTime=this.duration*(t.detail.value/100),this.audioPlay()},dateFormart:function(t){t=Number(t).toFixed(0);var i=Math.floor(t/3600),e=Math.floor((t-3600*i)/60),n=t-3600*i-60*e;return i=i<10?"0".concat(i):i,e=e<10?"0".concat(e):e,n=n<10?"0".concat(Math.floor(n)):Math.floor(n),"".concat(e,":").concat(n)}}};i.default=n}).call(this,e("c8ba"))}}]);